<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Service to BOS - Walking Skeleton Mockup</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #F3F4F6;
            color: #111827;
            line-height: 1.6;
        }

        .page-wrapper {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .page-header {
            background-color: #D71E28;
            color: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .page-header h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .help-icon {
            font-size: 1.5rem;
            cursor: pointer;
            opacity: 0.9;
            transition: opacity 0.2s;
            background: none;
            border: none;
            color: white;
            padding: 0.5rem;
        }

        .help-icon:hover {
            opacity: 1;
        }

        .container {
            flex: 1;
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
            width: 100%;
        }

        .form-card {
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            padding: 2rem;
        }

        .form-section {
            margin-bottom: 2.5rem;
        }

        .form-section:last-of-type {
            margin-bottom: 2rem;
        }

        .section-header {
            font-size: 1.25rem;
            font-weight: 600;
            color: #111827;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid #E5E7EB;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }

        .required {
            color: #D71E28;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #D1D5DB;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            font-family: inherit;
            transition: border-color 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: #D71E28;
            box-shadow: 0 0 0 3px rgba(215, 30, 40, 0.1);
        }

        textarea.form-input {
            min-height: 100px;
            resize: vertical;
        }

        textarea.technical {
            min-height: 150px;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
        }

        .field-hint {
            font-size: 0.75rem;
            color: #6B7280;
            margin-top: 0.25rem;
        }

        .submit-section {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            padding-top: 1.5rem;
            border-top: 1px solid #E5E7EB;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
        }

        .btn-secondary {
            background: white;
            color: #374151;
            border: 1px solid #D1D5DB;
        }

        .btn-secondary:hover {
            background: #F9FAFB;
        }

        .btn-primary {
            background: #D71E28;
            color: white;
        }

        .btn-primary:hover {
            background: #B71C24;
        }

        .guide-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.3);
            z-index: 999;
        }

        .guide-overlay.visible {
            display: block;
        }

        .help-drawer {
            position: fixed;
            top: 0;
            right: -500px;
            width: 480px;
            height: 100%;
            background: white;
            box-shadow: -4px 0 16px rgba(0,0,0,0.2);
            z-index: 1000;
            transition: right 0.3s ease;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .help-drawer.visible {
            right: 0;
        }

        .drawer-header {
            background: #D71E28;
            color: white;
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }

        .drawer-header h2 {
            font-size: 1.25rem;
            font-weight: 700;
        }

        .close-btn {
            font-size: 2rem;
            cursor: pointer;
            background: none;
            border: none;
            color: white;
            line-height: 1;
            opacity: 0.9;
            padding: 0;
        }

        .close-btn:hover {
            opacity: 1;
        }

        .drawer-content {
            padding: 1.5rem;
            flex: 1;
            overflow-y: auto;
        }

        .drawer-content h3 {
            font-size: 1rem;
            font-weight: 600;
            color: #111827;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }

        .drawer-content h3:first-child {
            margin-top: 0;
        }

        .drawer-content p {
            color: #374151;
            margin-bottom: 1rem;
            font-size: 0.875rem;
        }

        .drawer-content ul {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }

        .drawer-content li {
            color: #374151;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }

        .drawer-content strong {
            color: #111827;
        }

        .example-box {
            background: #F9FAFB;
            border-left: 4px solid #D71E28;
            padding: 1rem;
            margin: 1rem 0;
            font-size: 0.875rem;
        }

        .example-box strong {
            display: block;
            color: #D71E28;
            margin-bottom: 0.5rem;
        }

        .code-example {
            background: #F3F4F6;
            border: 1px solid #D1D5DB;
            border-radius: 0.25rem;
            padding: 0.75rem;
            font-family: 'Courier New', monospace;
            font-size: 0.75rem;
            margin: 0.5rem 0;
            overflow-x: auto;
        }

        .footer {
            background: white;
            border-top: 1px solid #E5E7EB;
            padding: 1rem 2rem;
            text-align: center;
            font-size: 0.75rem;
            color: #6B7280;
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <div class="page-header">
            <h1>Add Service to BOS</h1>
            <div class="header-right">
                <button class="help-icon" id="helpIcon" aria-label="Open help drawer">ℹ️</button>
            </div>
        </div>

        <div class="container">
            <div class="form-card">
                <form id="addServiceForm">
                    <!-- Section 1: Service Information -->
                    <div class="form-section">
                        <div class="section-header">Service Information</div>

                        <div class="form-group">
                            <label class="form-label" for="serviceName">
                                Service Name <span class="required">*</span>
                            </label>
                            <input
                                type="text"
                                id="serviceName"
                                name="serviceName"
                                class="form-input"
                                placeholder="e.g., Funding Service"
                                required
                            />
                            <div class="field-hint">The technical name of your service as it appears in monitoring systems.</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="businessPurpose">
                                Business Purpose <span class="required">*</span>
                            </label>
                            <textarea
                                id="businessPurpose"
                                name="businessPurpose"
                                class="form-input"
                                placeholder="Describe what this service does from a business perspective..."
                                required
                            ></textarea>
                            <div class="field-hint">Explain what business value this service provides. Focus on the "why" - why does this service exist?</div>
                        </div>
                    </div>

                    <!-- Section 2: Define First Signal -->
                    <div class="form-section">
                        <div class="section-header">Define First Signal</div>

                        <div class="form-group">
                            <label class="form-label" for="signalName">
                                Signal Name <span class="required">*</span>
                            </label>
                            <input
                                type="text"
                                id="signalName"
                                name="signalName"
                                class="form-input"
                                placeholder="e.g., funding-success-rate"
                                required
                            />
                            <div class="field-hint">A unique identifier for this signal. Use lowercase with hyphens (e.g., wire-transfer-success).</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="businessCriteria">
                                Business Criteria <span class="required">*</span>
                            </label>
                            <textarea
                                id="businessCriteria"
                                name="businessCriteria"
                                class="form-input"
                                placeholder="Describe what 'success' looks like from a business perspective..."
                                required
                            ></textarea>
                            <div class="field-hint">In plain language, describe what you're measuring and what "good" means for this signal.</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="technicalCriteria">
                                Technical Criteria <span class="required">*</span>
                            </label>
                            <textarea
                                id="technicalCriteria"
                                name="technicalCriteria"
                                class="form-input technical"
                                placeholder="Enter SQL query or measurement logic..."
                                required
                            ></textarea>
                            <div class="field-hint">The actual query or measurement logic that calculates this signal. This can be a SQL query, Splunk SPL, or API endpoint.</div>
                        </div>
                    </div>

                    <!-- Submit Section -->
                    <div class="submit-section">
                        <button type="button" class="btn btn-secondary">Cancel</button>
                        <button type="submit" class="btn btn-primary">Submit Service</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="footer">
            <strong>BOS Platform UI Mockup</strong> | Walking Skeleton v1.0 | 5 Foundational Fields
        </div>
    </div>

    <!-- Help Drawer -->
    <div class="guide-overlay" id="overlay"></div>
    <div class="help-drawer" id="drawer">
        <div class="drawer-header">
            <h2>Field Guide</h2>
            <button class="close-btn" id="closeBtn" aria-label="Close help drawer">×</button>
        </div>
        <div class="drawer-content">
            <h3>Purpose</h3>
            <p>This form captures the essential information needed to add your service to the Business Observability System (BOS). You'll define basic service information and create your first signal.</p>

            <h3>What is a Signal?</h3>
            <p>A signal is a measurement that indicates the health of your service. It answers a specific business question about service performance or reliability.</p>

            <h3>Field Explanations</h3>

            <h4>Service Name</h4>
            <p>The technical name of your service. This should match how your service is identified in monitoring systems, deployment configs, and service registries.</p>
            <div class="example-box">
                <strong>Example: Funding Service</strong>
                A service that executes wire transfers for home purchase transactions.
            </div>

            <h4>Business Purpose</h4>
            <p>A clear explanation of what business value this service provides. Think about the "why" - why does this service exist? What would break if this service went down?</p>
            <div class="example-box">
                <strong>Example:</strong>
                Execute wire transfers to complete home purchase transactions. When a home loan is approved and closing date arrives, this service transfers funds from the bank to the title company to complete the purchase.
            </div>

            <h4>Signal Name</h4>
            <p>A unique identifier for this signal. Use a descriptive name that clearly indicates what's being measured. Format: lowercase-with-hyphens.</p>
            <div class="example-box">
                <strong>Example: funding-success-rate</strong>
                Measures the percentage of wire transfers that complete successfully.
            </div>

            <h4>Business Criteria</h4>
            <p>In plain language, describe what you're measuring and what "good" looks like. This is how a Product Owner or business stakeholder would describe success.</p>
            <div class="example-box">
                <strong>Example:</strong>
                The percentage of wire transfer requests that successfully complete on the scheduled closing date. Success means the funds reach the title company within the required timeframe, allowing the home purchase to close as planned.
            </div>

            <h4>Technical Criteria</h4>
            <p>The actual measurement logic. This is typically a SQL query, Splunk search, or API call that calculates the signal value. Developers use this to instrument the measurement.</p>
            <div class="example-box">
                <strong>Example:</strong>
                <div class="code-example">SELECT
  (COUNT(*) FILTER (WHERE status='completed') * 100.0)
  / COUNT(*) as success_rate
FROM wire_transfers
WHERE
  scheduled_date = CURRENT_DATE
  AND created_at >= CURRENT_DATE</div>
            </div>

            <h3>Next Steps</h3>
            <p>After submitting this form, you can:</p>
            <ul>
                <li>Add additional signals for this service</li>
                <li>Define SLO targets (performance thresholds)</li>
                <li>Document business impact scenarios</li>
                <li>Add operational metadata (runbooks, alerts)</li>
            </ul>

            <h3>Need Help?</h3>
            <p>Contact the BOS Platform team for assistance with:</p>
            <ul>
                <li>Understanding what signals to measure</li>
                <li>Writing technical measurement queries</li>
                <li>Accessing monitoring data sources</li>
                <li>Reviewing your service definition</li>
            </ul>
        </div>
    </div>

    <script>
        // CSP-Compliant event handling (no inline onclick)
        document.addEventListener('DOMContentLoaded', function() {
            var helpIcon = document.getElementById('helpIcon');
            var closeBtn = document.getElementById('closeBtn');
            var overlay = document.getElementById('overlay');
            var drawer = document.getElementById('drawer');

            function toggleDrawer() {
                drawer.classList.toggle('visible');
                overlay.classList.toggle('visible');
            }

            function closeDrawer() {
                drawer.classList.remove('visible');
                overlay.classList.remove('visible');
            }

            if (helpIcon) {
                helpIcon.addEventListener('click', toggleDrawer);
            }

            if (closeBtn) {
                closeBtn.addEventListener('click', closeDrawer);
            }

            if (overlay) {
                overlay.addEventListener('click', closeDrawer);
            }

            // Form submission handler (mockup only)
            var form = document.getElementById('addServiceForm');
            if (form) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    alert('This is a mockup. In the real system, this would submit to the BOS API.');
                });
            }
        });
    </script>
</body>
</html>
